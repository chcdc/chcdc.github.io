
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="../../theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="../../theme/pygments/solarized-dark.min.css">
  <link rel="stylesheet" type="text/css" href="../../theme/font-awesome/css/font-awesome.min.css">


    <link href="https://blog.chcdc.com.br/feeds.atom" type="application/atom+xml" rel="alternate" title="Carlos Carvalho Atom">

    <link href="https://blog.chcdc.com.br/feeds.rss" type="application/rss+xml" rel="alternate" title="Carlos Carvalho RSS">


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66134049-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="Carlos Carvalho" />
<meta name="description" content="Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar. Mas aí pensei, como saber em tempo real quem acessou minha maquina? A solução é simples!" />
<meta name="keywords" content="sysadmin">

<meta property="og:site_name" content="Carlos Carvalho"/>
<meta property="og:title" content="Registro de acesso"/>
<meta property="og:description" content="Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar. Mas aí pensei, como saber em tempo real quem acessou minha maquina? A solução é simples!"/>
<meta property="og:locale" content="pt_BR"/>
<meta property="og:url" content="../../posts/registro-de-acesso"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-01-05 01:59:44-02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="../../author/">
<meta property="article:section" content="Shell Script"/>
<meta property="article:tag" content="sysadmin"/>
<meta property="og:image" content="">

  <title>Carlos Carvalho &ndash; Registro de acesso</title>

	<link rel="canonical" href="../../posts/registro-de-acesso"/>

	<title>Registro de acesso -- </title>

</head>
<body>
  <aside>
    <div>
      <a href="../..">
        <img src="../../theme/img/profile.png" alt="Carlos Carvalho" title="Carlos Carvalho">
      </a>
      <h1><a href="../..">Carlos Carvalho</a></h1>



      <ul class="social">
        <li><a class="sc-github" href="https://github.com/chcdc" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-stack-overflow" href="https://pt.stackoverflow.com/users/26828" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
        <li><a class="sc-rss" href="http://blog.chcdc.com.br/feeds/all-pt.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/chcdc" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/chcdc/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="../..">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://blog.chcdc.com.br/feeds.atom">    Atom
</a>

      <a href="https://blog.chcdc.com.br/feeds.rss">    RSS
</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="registro-de-acesso">Registro de acesso</h1>
    <p>
          Posted on ter 05 janeiro 2016 in <a href="../../category/">Shell Script</a>


        &#8226; 1 min read
    </p>
  </header>


  <div>
    <p>Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar.</p>
<p>Mas aí pensei, como saber em tempo real quem acessou minha maquina? A solução é simples!</p>


<p>Criei um script pra cada vez que houver logon no sistema tira uma foto e envia ao meu Email!</p>
<p>O script é bem simples:</p>
<div class="gist">
    <script src='https://gist.github.com/129b0f739b27db186eb7.js'></script>
    <noscript>
        <pre><code>#!/bin/bash

now=`date +%Y%m%d-%H%M%S`

 fswebcam -F 20 -r 1280x720 --jpeg 100 -D 1 $now.jpeg
 sendemail -f carloshccarvalho@hotmail.com -t chenriquecdc@gmail.com -u "Opa! Noticias" -m "Alguem acessou sua maquina agora!" -s smtp.live.com:587 -xu carloshccarvalho@hotmail.com -xp [ Password ] -a $HOME/$now.jpeg</code></pre>
    </noscript>
</div>
<p>Os comandos se resumem no seguinte:</p>
<p><b><code>now=date +%Y%m%d-%H%M%S</code></b> Variavel que recebe a data atual do sistema.
<br><code>fswebcam</code> - Software que permite tirar fotos a partir do terminal
    <br> - <code>-F</code> Define o numero de Frames para captar
    <br> - <code>-r</code> Define a resolução da captura
    <br> - <code>--jpeg 100</code> Formato e qualidade da saida
    <br> - <code>-D 1</code> Tempo de delay para a captura
    <br> - <code>$now.jpeg</code> Arquivo que será salvo</p>
<p><b><code>sendemail</code> </b> - Software de envio de emails
    <br>  - <code>-f</code> [FROM] Email do remetente
    <br>  - <code>-t</code> [TO] Email de destino
    <br>  - <code>-u</code> [Subject] Assunto
    <br>  - <code>-m</code> [Message] Mensagem do email
    <br>  - <code>-s</code> [SMTP] Servidor de Saida SMTP
    <br>  - <code>-xu</code> [Username] Conta de email que sera utilizada para envio
    <br>  - <code>-xp</code> [ Password] Senha
    <br>  - <code>-a</code> [FILE] Anexo do Email</p>
<p>Simples assim :)</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="../../tag/">sysadmin</a>
    </p>
  </div>



  <div class="related-posts">
    <h4>    You might enjoy
</h4>
    <ul class="related-posts">
      <li><a href="../../posts/dicas-iptables">Dicas IPTables</a></li>
      <li><a href="../../posts/permissoes-no-linux">Permissoes no Linux</a></li>
      <li><a href="../../posts/removendo-varios-arquivos-de-uma-lista-gigante">Removendo vários arquivos de uma lista gigante</a></li>
    </ul>
  </div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'chcdc';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Carlos Carvalho ",
  "url" : "../..",
  "image": "",
  "description": ""
}
</script>

</body>
</html>