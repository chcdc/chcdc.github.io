
<!DOCTYPE html>

<html lang="pt_br">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="index, follow" name="robots"/>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&amp;family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&amp;display=swap" rel="stylesheet"/>
<link href="../../theme/stylesheet/style.min.css" rel="stylesheet" type="text/css"/>
<link href="../../theme/stylesheet/dark-theme.min.css" id="dark-theme-style" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css"/>
<link href="../../theme/pygments/monokai.min.css" id="pygments-dark-theme" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css"/>
<link href="../../theme/pygments/monokai.min.css" id="pygments-light-theme" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)" rel="stylesheet" type="text/css"/>
<link href="../../theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="../../theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="../../theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<link href="https://blog.chcdc.com.br/feeds.atom" rel="alternate" title="Carlos Carvalho Atom" type="application/atom+xml"/>
<link href="https://blog.chcdc.com.br/feeds.rss" rel="alternate" title="Carlos Carvalho RSS" type="application/rss+xml"/>
<link href="https://blog.chcdc.com.br/extra/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="https://blog.chcdc.com.br/extra/favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66134049-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
<meta content="Carlos Carvalho" name="author"/>
<meta content="Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar. Mas aí pensei, como saber em tempo real quem acessou minha maquina …" name="description"/>
<meta content="sysadmin" name="keywords"/>
<meta content="Carlos Carvalho" property="og:site_name">
<meta content="Registro de acesso" property="og:title"/>
<meta content="Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar. Mas aí pensei, como saber em tempo real quem acessou minha maquina …" property="og:description"/>
<meta content="pt_BR" property="og:locale"/>
<meta content="../../posts/registro-de-acesso" property="og:url"/>
<meta content="article" property="og:type"/>
<meta content="2016-01-05 01:59:44-02:00" property="article:published_time"/>
<meta content="" property="article:modified_time"/>
<meta content="../../author/" property="article:author"/>
<meta content="Shell Script" property="article:section">
<meta content="sysadmin" property="article:tag"/>
<meta content="" property="og:image"/>
<title>Carlos Carvalho – Registro de acesso</title>
</meta></meta><link href="https://blog.chcdc.com.br/posts/registro-de-acesso" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Carlos Carvalho", "item": "https://blog.chcdc.com.br"}, {"@type": "ListItem", "position": 2, "name": "Posts", "item": "https://blog.chcdc.com.br/posts"}, {"@type": "ListItem", "position": 3, "name": "Registro de acesso", "item": "https://blog.chcdc.com.br/posts/registro-de-acesso"}, {"@type": "ListItem", "position": 4, "name": "Index", "item": "https://blog.chcdc.com.br/posts/registro-de-acesso/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Carlos Carvalho"}, "publisher": {"@type": "Organization", "name": "Carlos Carvalho"}, "headline": "Registro de acesso", "about": "Shell Script", "datePublished": "2016-01-05 01:59"}</script></head>
<body>
<aside>
<div>
<a href="../..">
<img alt="Carlos Carvalho" src="https://s.gravatar.com/avatar/b29f6fb12e1e61f1d2a46e1ec2834696?s=80" title="Carlos Carvalho"/>
</a>
<h1>
<a href="../..">Carlos Carvalho</a>
</h1>
<p>Yet Another Blog</p>
<ul class="social">
<li>
<a class="sc-github" href="https://github.com/chcdc" target="_blank">
<i class="fab fa-github"></i>
</a>
</li>
<li>
<a class="sc-stack-overflow" href="https://pt.stackoverflow.com/users/26828" target="_blank">
<i class="fab fa-stack-overflow"></i>
</a>
</li>
<li>
<a class="sc-rss" href="http://blog.chcdc.com.br/feeds/all-pt.atom.xml" target="_blank">
<i class="fas fa-rss"></i>
</a>
</li>
<li>
<a class="sc-linkedin" href="https://www.linkedin.com/in/chcdc/" target="_blank">
<i class="fab fa-linkedin"></i>
</a>
</li>
</ul>
</div>
</aside>
<main>
<nav>
<a href="../..">Home</a>
<a href="/archives.html">Archives</a>
<a href="/categories.html">Categories</a>
<a href="/tags.html">Tags</a>
<a href="https://blog.chcdc.com.br/feeds.atom">Atom</a>
<a href="https://blog.chcdc.com.br/feeds.rss">RSS</a>
</nav>
<article class="single">
<header>
<h1 id="registro-de-acesso">Registro de acesso</h1>
<p>
      Posted on Tue 05 January 2016 in <a href="../../category/shell-script">Shell Script</a>

        • 1 min read
    </p>
</header>
<div>
<p>Tenho um notebook que fica grande parte do tempo no meu quarto, então quando não estou em casa, fica liberado para alguem usar.</p>
<p>Mas aí pensei, como saber em tempo real quem acessou minha maquina? A solução é simples!</p>
<!--more-->
<p>Criei um script pra cada vez que houver logon no sistema tira uma foto e envia ao meu Email!</p>
<p>O script é bem simples:</p>
<div class="gist">
<script src="https://gist.github.com/129b0f739b27db186eb7.js"></script>
<noscript>
<pre><code>#!/bin/bash

now=`date +%Y%m%d-%H%M%S`

 fswebcam -F 20 -r 1280x720 --jpeg 100 -D 1 $now.jpeg
 sendemail -f carloshccarvalho@hotmail.com -t chenriquecdc@gmail.com -u "Opa! Noticias" -m "Alguem acessou sua maquina agora!" -s smtp.live.com:587 -xu carloshccarvalho@hotmail.com -xp [ Password ] -a $HOME/$now.jpeg</code></pre>
</noscript>
</div>
<p>Os comandos se resumem no seguinte:</p>
<p><b><code>now=date +%Y%m%d-%H%M%S</code></b> Variavel que recebe a data atual do sistema.
<br/><code>fswebcam</code> - Software que permite tirar fotos a partir do terminal
    <br/> - <code>-F</code> Define o numero de Frames para captar
    <br/> - <code>-r</code> Define a resolução da captura
    <br/> - <code>--jpeg 100</code> Formato e qualidade da saida
    <br/> - <code>-D 1</code> Tempo de delay para a captura
    <br/> - <code>$now.jpeg</code> Arquivo que será salvo</p>
<p><b><code>sendemail</code> </b> - Software de envio de emails
    <br/>  - <code>-f</code> [FROM] Email do remetente
    <br/>  - <code>-t</code> [TO] Email de destino
    <br/>  - <code>-u</code> [Subject] Assunto
    <br/>  - <code>-m</code> [Message] Mensagem do email
    <br/>  - <code>-s</code> [SMTP] Servidor de Saida SMTP
    <br/>  - <code>-xu</code> [Username] Conta de email que sera utilizada para envio
    <br/>  - <code>-xp</code> [ Password] Senha
    <br/>  - <code>-a</code> [FILE] Anexo do Email</p>
<p>Simples assim :)</p>
</div>
<div class="tag-cloud">
<p>
<a href="../../tag/sysadmin">sysadmin</a>
</p>
</div>
<section>
<p id="post-share-links">
      Share on:
      ❄
      <a href="https://twitter.com/intent/tweet?text=Registro%20de%20acesso&amp;url=https%3A//blog.chcdc.com.br/posts/registro-de-acesso&amp;hashtags=sysadmin" title="Share on Twitter">Twitter</a>
      ❄
      <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//blog.chcdc.com.br/posts/registro-de-acesso" title="Share on Facebook">Facebook</a>
      ❄
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A//blog.chcdc.com.br/posts/registro-de-acesso&amp;title=Registro%20de%20acesso&amp;summary=Tenho%20um%20notebook%20que%20fica%20grande%20parte%20do%20tempo%20no%20meu%20quarto%2C%20ent%C3%A3o%20quando%20n%C3%A3o%20estou%20em%20casa%2C%20fica%20liberado%20para%20alguem%20usar.%0AMas%20a%C3%AD%20pensei%2C%20como%20saber%20em%20tempo%20real%20quem%20acessou%20minha%20maquina%20%E2%80%A6&amp;source=https%3A//blog.chcdc.com.br/posts/registro-de-acesso" title="Share on LinkedIn">LinkedIn</a>
      ❄
      <a href="mailto:?subject=Registro%20de%20acesso&amp;body=https%3A//blog.chcdc.com.br/posts/registro-de-acesso" title="Share via Email">Email</a>
      ❄
    </p>
</section>
<div class="related-posts">
<h4>You might enjoy</h4>
<ul class="related-posts">
<li><a href="../../posts/criando-um-servidor-openvpn-no-centos-7">Criando um servidor OpenVPN no CentOS 7</a></li>
<li><a href="../../posts/dicas-iptables">Dicas IPTables</a></li>
<li><a href="../../posts/entendendo-as-permissoes-no-linux">Entendendo as Permissões no Linux</a></li>
<li><a href="../../posts/removendo-varios-arquivos-de-uma-lista-gigante">Removendo vários arquivos de uma lista gigante</a></li>
</ul>
</div>
<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'chcdc';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>
<footer>
<p>© 2021 Carlos Carvalho</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script data-default-theme="light" data-enable-auto-detect-theme="True" id="dark-theme-script" src="../../theme/dark-theme/dark-theme.min.js" type="text/javascript">
</script>
</p> </footer>
</main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Carlos Carvalho ",
  "url" : "../..",
  "image": "",
  "description": "Yet Another Blog"
}
</script>
</body>
</html>